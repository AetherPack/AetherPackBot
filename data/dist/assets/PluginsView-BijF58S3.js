import{c as p,r as _}from"./index-DOewkrcI.js";import{a as f,o as b,j as a,l as x,k as t,t as r,F as k,s as g,r as d,e as o,z as h,m as v,p as w}from"./vendor-BrbMrNWY.js";const C={class:"p-8"},N={key:0,class:"flex items-center justify-center h-64"},j={key:1,class:"card"},B={class:"text-center py-8"},M={class:"text-red-500"},V={key:2},z={key:0,class:"card text-center py-12"},P={key:1,class:"space-y-4"},R={class:"flex items-start justify-between"},L={class:"flex items-center gap-4"},F={class:"flex items-center gap-2"},G={class:"font-semibold text-gray-900 dark:text-white"},H={class:"text-sm text-gray-500"},I={key:0,class:"badge-info"},S={class:"text-sm text-gray-500 dark:text-gray-400 mt-1"},U={class:"text-xs text-gray-400 dark:text-gray-500 mt-1"},A={class:"flex items-center gap-3"},D={class:"mt-4 pt-4 border-t border-gray-200 dark:border-gray-700 flex justify-end gap-2"},E=["onClick","disabled"],T={key:0,class:"animate-spin w-4 h-4 mr-1",fill:"none",viewBox:"0 0 24 24"},$={key:0,class:"btn-ghost text-sm px-3 py-1 text-red-600"},Q=f({__name:"PluginsView",setup(q){const c=d([]),u=d(!0),n=d(""),l=d(null);async function m(){u.value=!0,n.value="";try{c.value=await p()}catch{n.value="获取插件列表失败"}finally{u.value=!1}}async function y(i){l.value=i;try{await _(i),await m()}catch(e){console.error("Reload failed:",e)}finally{l.value=null}}return b(m),(i,e)=>(o(),a("div",C,[e[5]||(e[5]=x('<div class="flex items-center justify-between mb-8"><div><h1 class="text-2xl font-bold text-gray-900 dark:text-white">插件管理</h1><p class="text-gray-500 dark:text-gray-400 mt-1">安装和管理扩展插件</p></div><button class="btn-primary"><svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path></svg> 安装插件 </button></div>',1)),u.value?(o(),a("div",N,[...e[0]||(e[0]=[t("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"},null,-1)])])):n.value?(o(),a("div",j,[t("div",B,[t("p",M,r(n.value),1),t("button",{onClick:m,class:"btn-primary mt-4"},"重试")])])):(o(),a("div",V,[c.value.length===0?(o(),a("div",z,[...e[1]||(e[1]=[x('<svg class="w-16 h-16 mx-auto text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"></path></svg><h3 class="text-lg font-medium text-gray-900 dark:text-white mt-4">暂无插件</h3><p class="text-gray-500 dark:text-gray-400 mt-2">安装插件扩展机器人功能</p><button class="btn-primary mt-6">安装插件</button>',4)])])):(o(),a("div",P,[(o(!0),a(k,null,g(c.value,s=>(o(),a("div",{key:s.name,class:"card hover:shadow-md transition-shadow"},[t("div",R,[t("div",L,[t("div",{class:h(["w-12 h-12 rounded-xl flex items-center justify-center",s.is_builtin?"bg-gradient-to-br from-purple-500 to-purple-600":"bg-gradient-to-br from-blue-500 to-blue-600"])},[...e[2]||(e[2]=[t("svg",{class:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})],-1)])],2),t("div",null,[t("div",F,[t("h3",G,r(s.name),1),t("span",H,"v"+r(s.version),1),s.is_builtin?(o(),a("span",I,"内置")):v("",!0)]),t("p",S,r(s.description||"暂无描述"),1),t("p",U," 作者: "+r(s.author||"未知"),1)])]),t("div",A,[t("span",{class:h(s.status==="RUNNING"?"badge-success":"badge-warning")},r(s.status==="RUNNING"?"运行中":"已加载"),3)])]),t("div",D,[t("button",{onClick:J=>y(s.name),disabled:l.value===s.name,class:"btn-ghost text-sm px-3 py-1"},[l.value===s.name?(o(),a("svg",T,[...e[3]||(e[3]=[t("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),t("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)])])):v("",!0),e[4]||(e[4]=w(" 重载 ",-1))],8,E),s.is_builtin?v("",!0):(o(),a("button",$," 卸载 "))])]))),128))]))]))]))}});export{Q as default};
