import{g as j}from"./index-DOewkrcI.js";import{a as N,o as C,j as l,k as t,t as a,F as h,s as b,m as _,r as v,e as r,z as w}from"./vendor-BrbMrNWY.js";const M={class:"p-8"},z={key:0,class:"flex items-center justify-center h-64"},B={key:1,class:"card"},H={class:"text-center py-8"},V={class:"text-red-500"},G={key:2,class:"space-y-8"},I={class:"grid grid-cols-1 md:grid-cols-3 gap-6"},O={class:"card"},R={class:"flex items-center justify-between"},S={class:"text-2xl font-bold text-gray-900 dark:text-white mt-1"},U={class:"card"},F={class:"flex items-center justify-between"},L={class:"text-2xl font-bold text-gray-900 dark:text-white mt-1"},P={class:"card"},D={class:"flex items-center justify-between"},E={class:"text-2xl font-bold text-gray-900 dark:text-white mt-1"},q={class:"card"},A={class:"space-y-3"},J={class:"font-medium text-gray-700 dark:text-gray-300"},K={key:0,class:"text-center py-4 text-gray-500"},Q={class:"card"},T={class:"space-y-3"},W={class:"font-medium text-gray-700 dark:text-gray-300"},X={class:"text-sm text-gray-500 ml-2"},Y={key:0,class:"text-center py-4 text-gray-500"},et=N({__name:"HomeView",setup(Z){const s=v(null),u=v(!0),d=v("");async function g(){u.value=!0,d.value="";try{s.value=await j()}catch{d.value="获取状态失败"}finally{u.value=!1}}C(g);function m(){if(!s.value)return{active:0,total:0};const n=s.value.platforms,e=Object.keys(n).length;return{active:Object.values(n).filter(i=>i).length,total:e}}function x(){if(!s.value)return{active:0,total:0};const n=s.value.plugins,e=n.length;return{active:n.filter(i=>i.status==="RUNNING").length,total:e}}return(n,e)=>{var c,i,p,y,f;return r(),l("div",M,[e[9]||(e[9]=t("div",{class:"mb-8"},[t("h1",{class:"text-2xl font-bold text-gray-900 dark:text-white"},"仪表盘"),t("p",{class:"text-gray-500 dark:text-gray-400 mt-1"},"系统概况和实时状态")],-1)),u.value?(r(),l("div",z,[...e[0]||(e[0]=[t("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"},null,-1)])])):d.value?(r(),l("div",B,[t("div",H,[t("p",V,a(d.value),1),t("button",{onClick:g,class:"btn-primary mt-4"},"重试")])])):(r(),l("div",G,[t("div",I,[t("div",O,[t("div",R,[t("div",null,[e[1]||(e[1]=t("p",{class:"text-sm text-gray-500 dark:text-gray-400"},"平台",-1)),t("p",S,a(m().active)+" / "+a(m().total),1)]),e[2]||(e[2]=t("div",{class:"w-12 h-12 bg-blue-100 dark:bg-blue-900/30 rounded-lg flex items-center justify-center"},[t("svg",{class:"w-6 h-6 text-blue-600 dark:text-blue-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.368 2.684 3 3 0 00-5.368-2.684z"})])],-1))])]),t("div",U,[t("div",F,[t("div",null,[e[3]||(e[3]=t("p",{class:"text-sm text-gray-500 dark:text-gray-400"},"提供者",-1)),t("p",L,a(((c=s.value)==null?void 0:c.providers.length)||0),1)]),e[4]||(e[4]=t("div",{class:"w-12 h-12 bg-green-100 dark:bg-green-900/30 rounded-lg flex items-center justify-center"},[t("svg",{class:"w-6 h-6 text-green-600 dark:text-green-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 3v2m6-2v2M9 19v2m6-2v2M5 9H3m2 6H3m18-6h-2m2 6h-2M7 19h10a2 2 0 002-2V7a2 2 0 00-2-2H7a2 2 0 00-2 2v10a2 2 0 002 2zM9 9h6v6H9V9z"})])],-1))])]),t("div",P,[t("div",D,[t("div",null,[e[5]||(e[5]=t("p",{class:"text-sm text-gray-500 dark:text-gray-400"},"插件",-1)),t("p",E,a(x().active)+" / "+a(x().total),1)]),e[6]||(e[6]=t("div",{class:"w-12 h-12 bg-purple-100 dark:bg-purple-900/30 rounded-lg flex items-center justify-center"},[t("svg",{class:"w-6 h-6 text-purple-600 dark:text-purple-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})])],-1))])])]),t("div",q,[e[7]||(e[7]=t("h2",{class:"text-lg font-semibold text-gray-900 dark:text-white mb-4"},"平台状态",-1)),t("div",A,[(r(!0),l(h,null,b((i=s.value)==null?void 0:i.platforms,(o,k)=>(r(),l("div",{key:k,class:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-800 rounded-lg"},[t("span",J,a(k),1),t("span",{class:w(o?"badge-success":"badge-error")},a(o?"运行中":"已停止"),3)]))),128)),!((p=s.value)!=null&&p.platforms)||Object.keys(s.value.platforms).length===0?(r(),l("div",K," 暂无平台配置 ")):_("",!0)])]),t("div",Q,[e[8]||(e[8]=t("h2",{class:"text-lg font-semibold text-gray-900 dark:text-white mb-4"},"插件列表",-1)),t("div",T,[(r(!0),l(h,null,b((y=s.value)==null?void 0:y.plugins,o=>(r(),l("div",{key:o.name,class:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-800 rounded-lg"},[t("div",null,[t("span",W,a(o.name),1),t("span",X,"v"+a(o.version),1)]),t("span",{class:w(o.status==="RUNNING"?"badge-success":"badge-warning")},a(o.status==="RUNNING"?"运行中":"已加载"),3)]))),128)),!((f=s.value)!=null&&f.plugins)||s.value.plugins.length===0?(r(),l("div",Y," 暂无插件安装 ")):_("",!0)])])]))])}}});export{et as default};
