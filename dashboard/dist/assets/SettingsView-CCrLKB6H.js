import{a as U,o as B,j as d,k as e,t as k,m as w,n as m,v as y,D as E,z as N,p as I,r as s,e as i}from"./vendor-BrbMrNWY.js";import{f as O,h as A}from"./index-DOewkrcI.js";const D={class:"p-8"},_={key:0,class:"flex items-center justify-center h-64"},j={key:1,class:"max-w-2xl space-y-6"},z={key:0,class:"p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg"},F={class:"text-sm text-red-600 dark:text-red-400"},G={key:1,class:"p-4 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg"},M={class:"text-sm text-green-600 dark:text-green-400"},S={class:"card"},W={class:"space-y-4"},H={class:"grid grid-cols-2 gap-4"},P={class:"card"},T={class:"space-y-4"},L={class:"card"},$={class:"card"},q={class:"flex items-center justify-between"},J={class:"flex justify-end"},K=["disabled"],Q={key:0,class:"animate-spin -ml-1 mr-2 h-4 w-4",fill:"none",viewBox:"0 0 24 24"},te=U({__name:"SettingsView",setup(X){const o=s({}),f=s(!0),u=s(!1),n=s(""),g=s(""),b=s("0.0.0.0"),p=s(6185),x=s("aetherpackbot"),v=s(""),c=s("INFO"),r=s(!0);async function V(){var a,t,l,C,h;f.value=!0,n.value="";try{o.value=await O(),b.value=((a=o.value.web)==null?void 0:a.host)||"0.0.0.0",p.value=((t=o.value.web)==null?void 0:t.port)||6185,x.value=((l=o.value.web)==null?void 0:l.admin_username)||"aetherpackbot",c.value=((C=o.value.logging)==null?void 0:C.level)||"INFO",r.value=((h=o.value.agent)==null?void 0:h.enabled)??!0}catch{n.value="获取配置失败"}finally{f.value=!1}}async function R(){u.value=!0,n.value="",g.value="";try{const a={"web.host":b.value,"web.port":p.value,"web.admin_username":x.value,"logging.level":c.value,"agent.enabled":r.value};v.value&&(a["web.admin_password"]=v.value),await A(a),g.value="配置已保存",v.value=""}catch{n.value="保存配置失败"}finally{u.value=!1}}return B(V),(a,t)=>(i(),d("div",D,[t[20]||(t[20]=e("div",{class:"mb-8"},[e("h1",{class:"text-2xl font-bold text-gray-900 dark:text-white"},"系统设置"),e("p",{class:"text-gray-500 dark:text-gray-400 mt-1"},"配置系统参数和选项")],-1)),f.value?(i(),d("div",_,[...t[6]||(t[6]=[e("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"},null,-1)])])):(i(),d("div",j,[n.value?(i(),d("div",z,[e("p",F,k(n.value),1)])):w("",!0),g.value?(i(),d("div",G,[e("p",M,k(g.value),1)])):w("",!0),e("div",S,[t[9]||(t[9]=e("h2",{class:"text-lg font-semibold text-gray-900 dark:text-white mb-4"},"Web 服务器",-1)),e("div",W,[e("div",H,[e("div",null,[t[7]||(t[7]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," 主机地址 ",-1)),m(e("input",{"onUpdate:modelValue":t[0]||(t[0]=l=>b.value=l),type:"text",class:"input",placeholder:"0.0.0.0"},null,512),[[y,b.value]])]),e("div",null,[t[8]||(t[8]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," 端口 ",-1)),m(e("input",{"onUpdate:modelValue":t[1]||(t[1]=l=>p.value=l),type:"number",class:"input",placeholder:"6185"},null,512),[[y,p.value,void 0,{number:!0}]])])])])]),e("div",P,[t[13]||(t[13]=e("h2",{class:"text-lg font-semibold text-gray-900 dark:text-white mb-4"},"认证设置",-1)),e("div",T,[e("div",null,[t[10]||(t[10]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," 管理员用户名 ",-1)),m(e("input",{"onUpdate:modelValue":t[2]||(t[2]=l=>x.value=l),type:"text",class:"input",placeholder:"aetherpackbot"},null,512),[[y,x.value]])]),e("div",null,[t[11]||(t[11]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," 新密码 ",-1)),m(e("input",{"onUpdate:modelValue":t[3]||(t[3]=l=>v.value=l),type:"password",class:"input",placeholder:"留空保持不变"},null,512),[[y,v.value]]),t[12]||(t[12]=e("p",{class:"text-xs text-gray-500 mt-1"},"留空则不修改密码",-1))])])]),e("div",L,[t[16]||(t[16]=e("h2",{class:"text-lg font-semibold text-gray-900 dark:text-white mb-4"},"日志设置",-1)),e("div",null,[t[15]||(t[15]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," 日志级别 ",-1)),m(e("select",{"onUpdate:modelValue":t[4]||(t[4]=l=>c.value=l),class:"input"},[...t[14]||(t[14]=[e("option",{value:"DEBUG"},"DEBUG",-1),e("option",{value:"INFO"},"INFO",-1),e("option",{value:"WARNING"},"WARNING",-1),e("option",{value:"ERROR"},"ERROR",-1)])],512),[[E,c.value]])])]),e("div",$,[t[18]||(t[18]=e("h2",{class:"text-lg font-semibold text-gray-900 dark:text-white mb-4"},"Agent 设置",-1)),e("div",q,[t[17]||(t[17]=e("div",null,[e("p",{class:"font-medium text-gray-900 dark:text-white"},"启用 Agent"),e("p",{class:"text-sm text-gray-500 dark:text-gray-400"},"允许机器人使用工具和执行任务")],-1)),e("button",{onClick:t[5]||(t[5]=l=>r.value=!r.value),class:N(["relative inline-flex h-6 w-11 items-center rounded-full transition-colors",r.value?"bg-primary-600":"bg-gray-300 dark:bg-gray-600"])},[e("span",{class:N(["inline-block h-4 w-4 transform rounded-full bg-white transition-transform",r.value?"translate-x-6":"translate-x-1"])},null,2)],2)])]),e("div",J,[e("button",{onClick:R,disabled:u.value,class:"btn-primary"},[u.value?(i(),d("svg",Q,[...t[19]||(t[19]=[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)])])):w("",!0),I(" "+k(u.value?"保存中...":"保存设置"),1)],8,K)])]))]))}});export{te as default};
